function makeid(ilen=10){

    if(ilen>62)ilen=62;

    var text = "";
    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

    for( var i=0; i < ilen; i++ )
        text += possible.charAt(Math.floor(Math.random() * possible.length));

    return text;
}

function addSeparator(nStr) {
    
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + '.' + '$2');
    }
    return x1 + x2;
}

$('.numbers-only').keypress(function(event) {

    var charCode = (event.which) ? event.which : event.keyCode;
        if ((charCode >= 48 && charCode <= 57)
            || charCode == 46
            || charCode == 44
            || charCode == 8)
            return true;
    return false;
});

function getDateToday(){

    var d       = new Date();
    var month   = d.getMonth()+1;
    var day     = d.getDate();
    var year    = d.getFullYear();

    if(month<10)month = '0'+month;
    if(day<10)day='0'+day;

    var today   = day+'-'+month+'-'+year;

    return today;
}

function getDayName(idate){

	var d = new Date(idate);
	var n = d.getDay();

	switch (n) {
		case 0:
			return `Ahad`;
			break;
		case 1:
			return `Senin`;
			break;
		case 2:
			return `Selasa`;
			break;
		case 3:
			return `Rabu`;
			break;
		case 4:
			return `Kamis`;
			break;
		case 5:
			return `Jum'at`;
			break;
		case 5:
			return `Sabtu`;
			break;	
		default:
			return `-`;
			break;
	}
}

function ioEncode(var_text){

    // Create Base64 Object
    var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}

    // Encode the String
    var encodedString = Base64.encode(var_text);

    return encodedString;
}

function ioDecode(var_text){

    // Create Base64 Object
    var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}

    // Encode the String
    var decodedString = Base64.decode(var_text);

    return decodedString;
}

function upload_file(form_data){

    var str_name = "";

    $.ajax({
        url: base_url+'common/upload_lampiran',
        type: 'post',
        enctype: 'multipart/form-data',
        contentType: false,
        processData: false,
        data: form_data,
        async: false,
        success: function(response){

            str_name = response;
        },
        error:function(){

            bootbox.alert({
                size:'small',
                title:"<span class='fa fa-exclamation-triangle text-warning'></span>&nbsp;Upload Gagal.",
                message:"Upload Gagal.",
                buttons:{
                    ok:{
                        label: 'OK',
                        className: 'btn-error'
                    }
                }
            });
        }
    });

    return str_name;
}

function replace_json_item_data(json_data,key_id,key_value,item_data){

    for(var k=0;k<json_data.length;++k) {

        if(json_data[k][key_id]==key_value) {

            for (var key in item_data) {

                if(item_data.hasOwnProperty(key)){

                    json_data[k][key] = item_data[key];
                }
            }
        }
    }

    return json_data;
}

function delete_json_item(json_data,key_id,key_value){

    for(var k=0;k<json_data.length;++k) {

        if(json_data[k][key_id]==key_value) {

            json_data.splice(k,1);
        }
    }

    return json_data;
}